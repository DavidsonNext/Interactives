
    <!DOCTYPE HTML>
    <html>
        <head>
            <style type="text/css">
            <!-- Table syling: http://www.textfixer.com/html/html-table-generator.php -->
             
    body {
        margin: 10px;
    }
    
    
    input[type="text"] {
        font-size: 12px;
    }
    
    input[type="text"].placeholder {
        color   : Gray;
        border  : 1px;
        padding : 0 10px;
        margin  : 0;
    }
    
    input[type="text"]:focus {
        color:RoyalBlue;
        this.value = '';
    }
    
    .dataframe  {font-size:18px;color:#333333;width:100%;border-width: 1px;border-color: #729ea5;border-collapse: collapse;}
    .dataframe  th {font-size:18px;background-color:#acc8cc;border-width: 1px;padding: 8px;border-style: solid;border-color: #729ea5;text-align:left;}
    .dataframe  tr {background-color:#d4e3e5;}
    .dataframe  td {font-size:18px;border-width: 1px;padding: 8px;border-style: solid;border-color: #729ea5;}
    .dataframe  tr:hover {background-color:#ffffff;}
    
    

            </style>

        </head>
        <body>
            
            <div id='jxgbox1' class='jxgbox' style='width:600px; height:500px; float:left; border: solid #1f628d 2px;'></div>        
            
            <table id="myActiveTable" border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Mass of Falling Object<br>M(kg)</th>
      <th>Distance Object Fall<br>D(m)</th>
      <th>Times for Fall<br>t(s)</th>
      <th>Calculated Average Acceleration of Falling Object<br>a(m/s^2)</th>
      <th>Calculated Tension in String<br>T(N)</th>
      <th>Calculated Torque Exerted on Post of Apparatus<br>T*D(m*N)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td> 0.100</td>
      <td> 0.500</td>
      <td> 9.7, 10.0, 10.3</td>
      <td> 0.010</td>
      <td> <input type="text" id="0___CalculatedTensioninString<br>T(N)" class="Active" size="10px" placeholder ="input"></input></td>
      <td> <input type="text" id="0___CalculatedTorqueExertedonPostofApparatus<br>T*D(m*N)" class="Active" size="10px" placeholder ="input"></input></td>
    </tr>
    <tr>
      <td> 0.150</td>
      <td> 0.500</td>
      <td>   6.9, 7.1, 7.3</td>
      <td> 0.020</td>
      <td> <input type="text" id="1___CalculatedTensioninString<br>T(N)" class="Active" size="10px" placeholder ="input"></input></td>
      <td> <input type="text" id="1___CalculatedTorqueExertedonPostofApparatus<br>T*D(m*N)" class="Active" size="10px" placeholder ="input"></input></td>
    </tr>
    <tr>
      <td> 0.200</td>
      <td> 0.500</td>
      <td>   5.8, 5.7, 5.6</td>
      <td> 0.031</td>
      <td> <input type="text" id="2___CalculatedTensioninString<br>T(N)" class="Active" size="10px" placeholder ="input"></input></td>
      <td> <input type="text" id="2___CalculatedTorqueExertedonPostofApparatus<br>T*D(m*N)" class="Active" size="10px" placeholder ="input"></input></td>
    </tr>
    <tr>
      <td> 0.250</td>
      <td> 0.500</td>
      <td>   4.9, 4.9, 4.8</td>
      <td> 0.042</td>
      <td> <input type="text" id="3___CalculatedTensioninString<br>T(N)" class="Active" size="10px" placeholder ="input"></input></td>
      <td> <input type="text" id="3___CalculatedTorqueExertedonPostofApparatus<br>T*D(m*N)" class="Active" size="10px" placeholder ="input"></input></td>
    </tr>
  </tbody>
</table>
            
            <!-- COMMENT: Buttons below are used to add debugging features to an interactive. Console logging allows you to see
            output within a browser's console. Try reading about Chrome's console. -->
                
            <!--START-BUTTON FOR PASS STATE-->
            <!-- COMMENT: Buttons below are used to add debugging features to an interactive. Conole logging allows you to see
                output within a browser's console. Try reading about Chrome's console. -->

            <input class="btn" type="button" value="Pass State for Grading" onClick="getState()">
            <input class="btn" type="button" value="Set State" onClick="setState(getState())">
            <div id="spaceBelow">State:</div>
            <!--END-BUTTON FOR PASS STATE-->
            
            <input class="btn" type="button" value="Plot Data" onClick="points = plotData()">
            <input class="btn" type="button" value="Clear Board" onClick="brd1 = initBoard()">
            <input class="btn" type="button" value="Best Fit Line" onClick="toggleFitLine()">
        
            <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
            <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jsxgraph/0.98/jsxgraphcore.js"></script>

            <script type='text/javascript'>
            
    //Standard edX JSinput functions
    getState = function(){
        var state={};
        state = getInput();
        statestr = JSON.stringify(state);        
        
        
        
        return statestr;
    }
    
    getInput = function() {
        var i;
        var data = {};
        data['response'] = {};
        
        //Colors
        data['colors'] = {};
        
        var cells = document.getElementsByClassName('Active');
        for (i=0;i<cells.length;i++) {
            data['response'][cells[i].id] = cells[i].value;
            data['colors'][cells[i].id] = 'white';
        }
        //console.log(data);
        return data;
    }

    setState = function(statestr){
        var ID='',state={};
        state = JSON.parse(statestr);
        
        for (ID in state['response']) {
            //console.log(state['response'][ID]);
            console.log(statestr);
            document.getElementById(ID).value = state['response'][ID];
            document.getElementById(ID).style.backgroundColor = state['colors'][ID];
        }
    }

    
    ////////////
    // BOARD 1
    ////////////
    
    var bboxlimits = [-0.05, 10, 0.35, -1]
    
    function initBoard() {
        var board,xlabel,ylabel;
        
        //JXG.JSXGraph.freeBoard(board);
        
        board = JXG.JSXGraph.initBoard('jxgbox1', {axis:true, 
                                                showCopyright: false,
                                                showNavigation: false,
                                                zoom: false,
                                                pan: false,
                                                boundingbox:bboxlimits,
                                                grid: false,
                                                hasMouseUp: true, 
        });

        //Axis Labels
        var ylabel = board.create('text',[-0.04,9,"Torque<br>T*D (N*m)"],{fixed:true});
        var xlabel = board.create('text',[0.3,-0.6,"Mass, M (kg)"],{fixed:true});
    
        return board;
    }
    
    var brd1 = initBoard();
    var showBestFit = true;
    
    function plotData() {        
        brd1 = initBoard();
        var XCol = 0,
            YCol = 5, //Input Field
            table = document.getElementById("myActiveTable"),
            cells = table.getElementsByTagName('td'),
            x=0, y=0, i=0,points=[],params=[]; //

        for (i = 0; i < cells.length; i += 6) {
            x = cells[i+XCol].innerHTML;
            y = cells[i+YCol].getElementsByTagName('input')[0].value;
        
            if (x.length > 0 && y.length > 0) {
                var p = brd1.create('point',[Number(x),Number(y)],{fixed:true});
                points.push(p);
            }
        }
        
        params = bestFitLine(points);
        
        
        return points;
    }

    bestFitLine = function(points) {
        if (points.length < 0) {
            return alert("No data entered in table.");
        }
        
        var ydata = [];
        var xdata = [];
        for (i=0;i<points.length;i++) {
            ydata.push(points[i].Y());
            xdata.push(points[i].X());
        }
            
        var fit = linearRegression(ydata,xdata);
        console.log(fit);
        brd1.create('functiongraph',
                       [function(x){ return fit['slope']*x + fit['intercept'];}, bboxlimits[0], bboxlimits[2]],
                       {name:'Best Fit','strokeWidth':'2'}
                    );
        return fit;
    }

    


    function linearRegression(y,x){
        //http://trentrichardson.com/2010/04/06/compute-linear-regressions-in-javascript/
        var lr = {};
        var n = y.length;
        var sum_x = 0;
        var sum_y = 0;
        var sum_xy = 0;
        var sum_xx = 0;
        var sum_yy = 0;
        
        for (var i = 0; i < y.length; i++) {
            sum_x += x[i];
            sum_y += y[i];
            sum_xy += (x[i]*y[i]);
            sum_xx += (x[i]*x[i]);
            sum_yy += (y[i]*y[i]);
        } 
    
        lr['slope'] = (n * sum_xy - sum_x * sum_y) / (n*sum_xx - sum_x * sum_x);
        lr['intercept'] = (sum_y - lr.slope * sum_x)/n;
        lr['r2'] = Math.pow((n*sum_xy - sum_x*sum_y)/Math.sqrt((n*sum_xx-sum_x*sum_x)*(n*sum_yy-sum_y*sum_y)),2);

        return lr;
    }

    

            </script>
            
        </body>
    </html>
